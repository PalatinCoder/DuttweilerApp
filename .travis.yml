language: node_js
before_install: npm install -g greenkeeper-lockfile
install: npm install
before_script: greenkeeper-lockfile-update
after_script: greenkeeper-lockfile-upload
env:
  - GK_LOCK_COMMIT_AMEND=true
matrix:
  include:
  - node_js: '8'
    sudo: required
    os: linux
    dist: trusty
    script: npm run test:integration

  - node_js: '8'
    sudo: required
    os: linux
    dist: trusty
    addons:
      chrome: stable
      firefox: latest
    before_script:
    - export DISPLAY=:99.0
    - sh -e /etc/init.d/xvfb start
    script:
    - npm run test:unit

deploy:
  on:
    tags: true
  provider: firebase
  project: duttweilerappgcm
  message: $TRAVIS_TAG
  token:
    secure: #TOKEN#
  
